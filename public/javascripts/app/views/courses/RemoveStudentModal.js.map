{"version":3,"sources":["app/templates/courses/remove-student-modal.jade","app/views/courses/RemoveStudentModal.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,sBAAR;;AACZ,WAAW,QAAQ,wCAAR;;AAEX,MAAM,CAAC,OAAP,GAAuB;;;;;;;+BACrB,KAAI;;+BACJ,WAAU;;+BAEV,SACE;IAAA,6BAA6B,4BAA7B;;;+BAEF,aAAY,SAAC,OAAD;IACV,IAAC,UAAD,GAAa,OAAO,CAAC;IACrB,IAAC,KAAD,GAAQ,OAAO,CAAC;WAChB,IAAC,gBAAD,GAAmB,OAAO,CAAC;EAHjB;;+BAKZ,6BAA4B;AAC1B;IAAA,IAAC,EAAD,CAAG,yBAAH,CAA6B,CAAC,QAA9B,CAAuC,MAAvC;IACA,IAAC,EAAD,CAAG,0BAAH,CAA8B,CAAC,WAA/B,CAA2C,MAA3C;IACA,SAAS,IAAC,KAAI,CAAC;IACf,IAAC,SAAD,GAAY,IAAC,gBAAe,CAAC,MAAjB,CAAwB,SAAC,cAAD;aAAoB,CAAC,CAAC,QAAF,CAAW,cAAc,CAAC,GAAf,CAAmB,SAAnB,CAAX,EAA0C,MAA1C;IAApB,CAAxB;IACZ,IAAC,SAAQ,CAAC,IAAV,CAAe,IAAC,UAAhB;IACA,IAAC,UAAD,GAAa,CAAC,CAAC,IAAF,CAAO,IAAC,SAAR;WACb,IAAC,cAAD;EAP0B;;+BAS5B,gBAAe;AACb;IAAA,QAAQ,IAAC,SAAQ,CAAC,KAAV;IACR,IAAG,CAAI,KAAP;MACE,IAAC,QAAD,CAAS,gBAAT,EAA2B;QAAE,MAAM,IAAC,KAAT;OAA3B;MACA,IAAC,KAAD;AACA,aAHF;;IAKA,KAAK,CAAC,YAAN,CAAmB,IAAC,KAAI,CAAC,EAAzB;IACA,MAAM,CAAC,MAAM,CAAC,IAAC,UAAD,GAAa,IAAC,SAAQ,CAAC,MAAxB,CAAN,GAAwC,IAAC,UAA1C,CAAoD,CAAC,OAArD,CAA6D,CAA7D,IAAkE;IACxE,IAAC,EAAD,CAAG,wCAAH,CAA4C,CAAC,GAA7C,CAAiD,OAAjD,EAA0D,GAA1D;WACA,IAAC,aAAD,CAAc,KAAd,EAAqB,MAArB,EAA6B;aAC3B,IAAC,cAAD;IAD2B,CAA7B;EAVa;;;;GArBiC","file":"public/javascripts/app/views/courses/RemoveStudentModal.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content style-flat\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<div class=\\\"text-center\\\"><h1 data-i18n=\\\"courses.remove_student1\\\" class=\\\"modal-title\\\"></h1><span class=\\\"glyphicon glyphicon-warning-sign text-danger\\\"></span><p><span>\" + (jade.escape(null == (jade.interp = view.user.get('name', true)) ? \"\" : jade.interp)) + \"</span>\");\nif ( view.user.get('email'))\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = \" â€” \" + view.user.get('email')) ? \"\" : jade.interp)) + \"</span>\");\n}\nbuf.push(\"</p><h2 data-i18n=\\\"courses.are_you_sure\\\"></h2></div></div><div class=\\\"modal-body\\\"><p class=\\\"text-center\\\"><span data-i18n=\\\"courses.remove_description1\\\"></span>\");\nif ( view.user.isEnrolled())\n{\nbuf.push(\"<span data-i18n=\\\"courses.remove_description2\\\"></span>\");\n}\nbuf.push(\"</p></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><div id=\\\"remove-student-buttons\\\" class=\\\"text-center\\\"><p><button data-dismiss=\\\"modal\\\" data-i18n=\\\"courses.keep_student\\\" class=\\\"btn btn-lg btn-forest text-uppercase\\\"></button></p><p>- OR -</p><p><button id=\\\"remove-student-btn\\\" data-i18n=\\\"courses.remove_student1\\\" class=\\\"btn btn-lg btn-burgandy text-uppercase\\\"></button></p></div><div id=\\\"remove-student-progress\\\" class=\\\"text-center hide\\\"><div class=\\\"progress\\\"><div class=\\\"progress-bar\\\"></div></div><p data-i18n=\\\"courses.removing_user\\\" class=\\\"text-info\\\"></p></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ModalView = require 'views/core/ModalView'\ntemplate = require 'templates/courses/remove-student-modal'\n\nmodule.exports = class RemoveStudentModal extends ModalView\n  id: 'remove-student-modal'\n  template: template\n\n  events:\n    'click #remove-student-btn': 'onClickRemoveStudentButton'\n\n  initialize: (options) ->\n    @classroom = options.classroom\n    @user = options.user\n    @courseInstances = options.courseInstances\n\n  onClickRemoveStudentButton: ->\n    @$('#remove-student-buttons').addClass('hide')\n    @$('#remove-student-progress').removeClass('hide')\n    userID = @user.id\n    @toRemove = @courseInstances.filter (courseInstance) -> _.contains(courseInstance.get('members'), userID)\n    @toRemove.push @classroom\n    @totalJobs = _.size(@toRemove)\n    @removeStudent()\n\n  removeStudent: ->\n    model = @toRemove.shift()\n    if not model\n      @trigger 'remove-student', { user: @user }\n      @hide()\n      return\n\n    model.removeMember(@user.id)\n    pct = (100 * (@totalJobs - @toRemove.length) / @totalJobs).toFixed(1) + '%'\n    @$('#remove-student-progress .progress-bar').css('width', pct)\n    @listenToOnce model, 'sync', ->\n      @removeStudent()\n"]}