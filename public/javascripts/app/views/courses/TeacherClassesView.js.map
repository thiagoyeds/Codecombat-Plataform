{"version":3,"sources":["app/templates/courses/teacher-classes-view.jade","app/views/courses/TeacherClassesView.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"public/javascripts/app/views/courses/TeacherClassesView.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),courseInstance = locals_.courseInstance,view = locals_.view,me = locals_.me,serverConfig = locals_.serverConfig,document = locals_.document,_ = locals_._;var archivedClassRow_mixin = function(classroom){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<div class=\\\"class row\\\"><div class=\\\"col-xs-10\\\"><span>\" + (jade.escape(null == (jade.interp = classroom.get('name')) ? \"\" : jade.interp)) + \"</span></div><div class=\\\"col-xs-2\\\"><div class=\\\"class-links pull-right\\\"><a\" + (jade.attrs({ 'data-i18n':('teacher.unarchive_class'), 'data-classroom-id':(classroom.id), \"class\": [('unarchive-classroom'),('text-h6')] }, {\"data-i18n\":true,\"data-classroom-id\":true})) + \"></a></div></div></div>\");\n};\nvar progressDotLabel_mixin = function(label){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<div class=\\\"dot-label text-h6\\\">\" + (jade.escape(null == (jade.interp = label) ? \"\" : jade.interp)) + \"</div>\");\n};\nvar progressDot_mixin = function(classroom, course, label){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\ncourseInstance = view.courseInstances.findWhere({ courseID: course.id, classroomID: classroom.id })\nvar total = classroom.get('members').length\nvar complete = 0;\nvar dotClass = '';\nvar started = 0;\nif ( courseInstance)\n{\ncomplete = courseInstance.numCompleted\nstarted = courseInstance.started\ndotClass = complete === total ? 'forest' : started ? 'gold' : '';\n}\nvar progressDotContext = {total: total, complete: complete};\nbuf.push(\"<div\" + (jade.attrs({ 'data-title':(view.progressDotTemplate(progressDotContext)), \"class\": [('progress-dot'),(dotClass)] }, {\"class\":true,\"data-title\":true})) + \">\");\nprogressDotLabel_mixin(label);\nbuf.push(\"</div>\");\n};\nvar createClassButton_mixin = function(){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<div class=\\\"create-class\\\"><div class=\\\"text-center\\\"><a data-i18n=\\\"teacher.create_new_class\\\" class=\\\"create-classroom-btn btn btn-lg btn-primary\\\"></a></div></div>\");\n};\nvar addStudentsButton_mixin = function(classroom){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<div class=\\\"add-students\\\"><div class=\\\"text-center\\\"><div data-i18n=\\\"teacher.no_students_yet_view_class\\\" class=\\\"small-details\\\"></div></div></div>\");\n};\nvar classRow_mixin = function(classroom){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<div class=\\\"class row\\\"><div class=\\\"class-details-col\\\"><div class=\\\"text-h4 semibold\\\">\" + (jade.escape(null == (jade.interp = classroom.get('name')) ? \"\" : jade.interp)) + \"</div><div class=\\\"language small\\\"><span data-i18n=\\\"teacher.language\\\"></span>:&nbsp;<span class=\\\"language-name\\\">\" + (jade.escape(null == (jade.interp = classroom.capitalLanguage) ? \"\" : jade.interp)) + \"</span></div><div class=\\\"student-count small\\\"><span data-i18n=\\\"courses.students\\\"></span>:&nbsp;<span>\" + (jade.escape(null == (jade.interp = classroom.get('members').length) ? \"\" : jade.interp)) + \"</span></div><div class=\\\"class-links\\\"><a\" + (jade.attrs({ 'data-i18n':('teacher.view_class'), 'data-classroom-id':(classroom.id), 'data-event-action':(\"Teachers Classes View Class Link\"), \"class\": [('view-class-btn'),('text-h6')] }, {\"data-i18n\":true,\"data-classroom-id\":true,\"data-event-action\":true})) + \"></a><a\" + (jade.attrs({ 'data-i18n':('teacher.edit_class_settings'), 'data-classroom-id':(classroom.id), 'data-event-action':(\"Teachers Classes Edit Class Started\"), \"class\": [('edit-classroom'),('text-h6')] }, {\"data-i18n\":true,\"data-classroom-id\":true,\"data-event-action\":true})) + \"></a><a\" + (jade.attrs({ 'data-i18n':('teacher.archive_class'), 'data-classroom-id':(classroom.id), 'data-event-action':(\"Teachers Classes Archive Class\"), \"class\": [('archive-classroom'),('text-h6')] }, {\"data-i18n\":true,\"data-classroom-id\":true,\"data-event-action\":true})) + \"></a></div></div><div class=\\\"flex-right\\\"><div class=\\\"progress-col\\\">\");\nif ( classroom.get('members').length == 0)\n{\naddStudentsButton_mixin(classroom);\n}\nelse\n{\nvar courses = classroom.getSortedCourses().map(function(c) { return view.courses.get(c._id); });\nvar courseLabelsArray = view.helper.courseLabelsArray(courses);\n// iterate classroom.get('courses') || []\n;(function(){\n  var $$obj = classroom.get('courses') || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var trimCourse = $$obj[index];\n\nvar course = view.courses.get(trimCourse._id);\nif ( view.courseInstances.findWhere({ classroomID: classroom.id, courseID: course.id }))\n{\nvar label = courseLabelsArray[index];\nprogressDot_mixin(classroom, course, label);\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var trimCourse = $$obj[index];\n\nvar course = view.courses.get(trimCourse._id);\nif ( view.courseInstances.findWhere({ classroomID: classroom.id, courseID: course.id }))\n{\nvar label = courseLabelsArray[index];\nprogressDot_mixin(classroom, course, label);\n}\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div><div class=\\\"view-class-arrow\\\"><a\" + (jade.attrs({ 'data-classroom-id':(classroom.id), 'data-event-action':(\"Teachers Classes View Class Chevron\"), \"class\": [('view-class-arrow-inner'),('glyphicon'),('glyphicon-chevron-right'),('view-class-btn')] }, {\"data-classroom-id\":true,\"data-event-action\":true})) + \"></a></div></div></div>\");\n};\nvar accountLinks_mixin = function(){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\"), 'data-i18n':(\"nav.profile\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li><li><a href=\\\"/account/settings\\\" data-i18n=\\\"play.settings\\\"></a></li>\");\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/payments\\\" data-i18n=\\\"account.payments\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()) || me.hasSubscription())\n{\nbuf.push(\"<li><a href=\\\"/account/subscription\\\" data-i18n=\\\"account.subscription\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/prepaid\\\" data-i18n=\\\"account.prepaid_codes\\\"></a></li>\");\n}\nbuf.push(\"<li><a id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\"></a></li>\");\n};\nbuf.push(\"<div class=\\\"style-flat\\\"><nav id=\\\"main-nav\\\" class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid container\\\"><div class=\\\"row\\\"><div class=\\\"col-md-12\\\"><div class=\\\"navbar-header\\\"><button data-toggle=\\\"collapse\\\" data-target=\\\"#navbar-collapse\\\" aria-expanded=\\\"false\\\" class=\\\"navbar-toggle collapsed\\\"><span data-i18n=\\\"nav.toggle_nav\\\" class=\\\"sr-only\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span></button><a href=\\\"/\\\" class=\\\"navbar-brand\\\">\");\nif ( serverConfig.codeNinjas)\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\" class=\\\"code-ninjas-powered-by\\\"/><img src=\\\"/images/pages/base/code-ninjas-logo-right.png\\\" class=\\\"code-ninjas-logo\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\"/>\");\n}\nbuf.push(\"<span class=\\\"glyphicon glyphicon-home\\\"></span></a></div><div id=\\\"navbar-collapse\\\" class=\\\"collapse navbar-collapse\\\"><ul class=\\\"nav navbar-nav\\\"><li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li>\");\nif ( me.isStudent())\n{\nbuf.push(\"<li><a href=\\\"/students\\\" data-i18n=\\\"nav.my_courses\\\"></a></li>\");\n}\nif ( !me.isAnonymous() && me.isTeacher())\n{\nbuf.push(\"<li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li>\");\n}\nif ( !me.isAnonymous() && !me.isStudent() && !me.isTeacher())\n{\nbuf.push(\"<li><a href=\\\"/play\\\" data-i18n=\\\"common.play\\\"></a></li><li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li>\");\n}\nbuf.push(\"</ul>\");\nif ( me.isAnonymous())\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><a id=\\\"create-account-link\\\" data-i18n=\\\"login.sign_up\\\" class=\\\"signup-button\\\"></a></li><li><a id=\\\"login-link\\\" data-i18n=\\\"login.log_in\\\" class=\\\"login-button\\\"></a></li></ul>\");\n}\nelse\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav hidden-md hidden-lg\\\"><li class=\\\"disabled\\\"><a><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span>\" + (jade.escape(null == (jade.interp = me.displayName()) ? \"\" : jade.interp)) + \"</span></a></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul><ul class=\\\"nav navbar-nav\\\"><li class=\\\"dropdown hidden-xs hidden-sm\\\"><a href=\\\"#\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" class=\\\"dropdown-toggle\\\"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span data-i18n=\\\"nav.my_account\\\"></span></a><ul class=\\\"dropdown-menu\\\"><li class=\\\"user-dropdown-header text-center\\\"><span class=\\\"user-level\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\") }, {\"href\":true})) + \"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/></a><h5>\" + (jade.escape(null == (jade.interp = me.broadName()) ? \"\" : jade.interp)) + \"</h5></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul></li></ul>\");\n}\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><div id=\\\"language-dropdown-wrapper\\\"><select class=\\\"language-dropdown form-control\\\"></select></div></li></ul></div></div></div></div></nav>\");\nvar path = document.location.pathname\nbuf.push(\"<div id=\\\"teacher-dashboard-nav\\\"><nav class=\\\"navbar\\\"><div class=\\\"container-fluid container\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#teacher-dashboard-nav-collapse\\\" class=\\\"navbar-toggle collapsed\\\"><span class=\\\"sr-only\\\">Toggle navigation</span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span></button><span data-i18n=\\\"teacher.teacher_dashboard\\\" class=\\\"navbar-brand text-h4\\\"></span></div><div id=\\\"teacher-dashboard-nav-collapse\\\" class=\\\"collapse navbar-collapse\\\"><ul class=\\\"nav navbar-nav\\\"><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/classes') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/classes\\\"><small data-i18n=\\\"teacher.my_classes\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/courses') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/courses\\\"><small data-i18n=\\\"teacher.courses\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/licenses') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/licenses\\\"><small data-i18n=\\\"teacher.enrollments\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/resources') === 0 && path.indexOf('/teachers/resources/faq') !== 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/resources\\\"><small data-i18n=\\\"teacher.resource_hub\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/resources/faq') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/resources/faq\\\"><small data-i18n=\\\"teacher.educator_faq\\\" class=\\\"label\\\"></small></a></li></ul></div></div></nav></div><div id=\\\"site-content-area\\\">\");\nif ( (!me.isTeacher() && !view.classrooms.size()) || me.isAnonymous())\n{\nbuf.push(\"<div class=\\\"access-restricted container text-center m-y-3\\\"><h5 data-i18n=\\\"teacher.access_restricted\\\"></h5><p data-i18n=\\\"teacher.teacher_account_required\\\"></p>\");\nif ( me.isAnonymous())\n{\nbuf.push(\"<div data-i18n=\\\"login.log_in\\\" class=\\\"login-button btn btn-lg btn-primary\\\"></div><button data-event-action=\\\"Teachers Classes Create Teacher Account\\\" data-i18n=\\\"teacher.create_teacher_account\\\" class=\\\"btn btn-lg btn-primary-alt create-teacher-btn\\\"></button>\");\n}\nelse\n{\nbuf.push(\"<button data-event-action=\\\"Teachers Classes Convert Teacher Account\\\" data-i18n=\\\"teachers_quote.convert_account_title\\\" class=\\\"btn btn-lg btn-primary update-teacher-btn\\\"></button><button id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\" class=\\\"btn btn-lg btn-primary-alt\\\"></button>\");\n}\nbuf.push(\"</div><div class=\\\"container\\\"><div class=\\\"teacher-account-blurb text-center col-xs-6 col-xs-offset-3 m-y-3\\\"><h5 data-i18n=\\\"teacher.what_is_a_teacher_account\\\"></h5><p data-i18n=\\\"teacher.teacher_account_explanation\\\"></p></div></div>\");\n}\nelse\n{\nif ( !me.isTeacher() && !me.isAdmin())\n{\nbuf.push(\"<div class=\\\"alert alert-danger text-center\\\"><div class=\\\"container\\\"><!-- DNT: Temporary--><h3>ATTENTION: Please upgrade your account to a Teacher Account.</h3><p>We are transitioning to a new improved classroom management system for instructors.\\nPlease convert your account to ensure you retain access to your classrooms.</p><button data-event-action=\\\"Teachers Classes Convert Teacher Account Temp\\\" class=\\\"btn btn-primary btn-lg update-teacher-btn\\\">Upgrade to teacher account</button></div></div>\");\n}\nbuf.push(\"<div class=\\\"container\\\"><h3 data-i18n=\\\"teacher.current_classes\\\"></h3></div><div class=\\\"classes container\\\"><!-- Loop each class-->\");\n// iterate view.classrooms.models\n;(function(){\n  var $$obj = view.classrooms.models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var classroom = $$obj[$index];\n\nif (!( classroom.get('archived')))\n{\nclassRow_mixin(classroom);\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var classroom = $$obj[$index];\n\nif (!( classroom.get('archived')))\n{\nclassRow_mixin(classroom);\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\ncreateClassButton_mixin();\n}\nvar archivedClassrooms = view.classrooms.where({archived: true});\nif ( _.size(archivedClassrooms))\n{\nbuf.push(\"<div class=\\\"container\\\"><h3 data-i18n=\\\"teacher.archived_classes\\\"></h3><p data-i18n=\\\"teacher.archived_classes_blurb\\\"></p></div><div class=\\\"classes container\\\">\");\n// iterate archivedClassrooms\n;(function(){\n  var $$obj = archivedClassrooms;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var classroom = $$obj[$index];\n\narchivedClassRow_mixin(classroom);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var classroom = $$obj[$index];\n\narchivedClassRow_mixin(classroom);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div><div class=\\\"container-fluid\\\"><div id=\\\"footer\\\" class=\\\"small\\\"><div class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong>CodeCombat</strong></li><li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li><li><a href=\\\"/about#jobs\\\" data-i18n=\\\"nav.jobs\\\"></a></li><li><a href=\\\"http://blog.codecombat.com/\\\" data-i18n=\\\"nav.blog\\\"></a></li><li><a href=\\\"/legal\\\" data-i18n=\\\"nav.legal\\\"></a></li><li><a href=\\\"/privacy\\\" data-i18n=\\\"nav.privacy\\\"></a></li></ul></div>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.schools\\\"></strong></li><li><a href=\\\"/teachers/resources/faq\\\" data-i18n=\\\"teacher.educator_faq\\\"></a></li><li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li><li><a href=\\\"/teachers/resources\\\" data-i18n=\\\"nav.resource_hub\\\"></a></li><li><a href=\\\"/teachers/demo\\\" data-i18n=\\\"new_home.request_demo\\\"></a></li></ul></div>\");\n}\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.get_involved\\\"></strong></li><li><a href=\\\"/community\\\" data-i18n=\\\"nav.community\\\"></a></li><li><a href=\\\"/contribute\\\" data-i18n=\\\"nav.contribute\\\"></a></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"/play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a></li><li><a href=\\\"https://github.com/codecombat/codecombat\\\" data-i18n=\\\"nav.open_source\\\"></a></li></ul></div><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.support\\\"></strong></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a tabindex=\\\"-1\\\" data-i18n=\\\"nav.contact\\\" class=\\\"contact-modal\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"https://www.facebook.com/codecombat\\\" data-i18n=\\\"nav.facebook\\\"></a></li><li><a href=\\\"https://twitter.com/codecombat\\\" data-i18n=\\\"nav.twitter\\\"></a></li></ul></div></div></div></div><div id=\\\"final-footer\\\" class=\\\"small text-center\\\">Copyright Â©2016 CodeCombat. All Rights Reserved.<br class=\\\"hidden-lg hidden-md\\\"/><img src=\\\"/images/pages/base/logo.png\\\" alt=\\\"CodeCombat\\\"/><br class=\\\"hidden-lg hidden-md\\\"/>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<span data-i18n=\\\"nav.help_pref\\\" class=\\\"spr\\\"></span>\");\nvar supportEmail = (me.get('preferredLanguage', true) || 'en-US').split('-')[0] == 'nl' ? 'klantenservice@codecombat.nl' : 'team@codecombat.com';\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"mailto:\" + supportEmail) }, {\"href\":true})) + \">\" + (jade.escape(null == (jade.interp = supportEmail) ? \"\" : jade.interp)) + \"</a><span data-i18n=\\\"nav.help_suff\\\" class=\\\"spl\\\"></span>\");\n}\nbuf.push(\"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","RootView = require 'views/core/RootView'\ntemplate = require 'templates/courses/teacher-classes-view'\nClassroom = require 'models/Classroom'\nClassrooms = require 'collections/Classrooms'\nCourses = require 'collections/Courses'\nCampaign = require 'models/Campaign'\nCampaigns = require 'collections/Campaigns'\nLevelSessions = require 'collections/LevelSessions'\nCourseInstance = require 'models/CourseInstance'\nCourseInstances = require 'collections/CourseInstances'\nClassroomSettingsModal = require 'views/courses/ClassroomSettingsModal'\nInviteToClassroomModal = require 'views/courses/InviteToClassroomModal'\nUser = require 'models/User'\nutils = require 'core/utils'\nhelper = require 'lib/coursesHelper'\n\nmodule.exports = class TeacherClassesView extends RootView\n  id: 'teacher-classes-view'\n  template: template\n  helper: helper\n\n  events:\n    'click .edit-classroom': 'onClickEditClassroom'\n    'click .archive-classroom': 'onClickArchiveClassroom'\n    'click .unarchive-classroom': 'onClickUnarchiveClassroom'\n    'click .add-students-btn': 'onClickAddStudentsButton'\n    'click .create-classroom-btn': 'onClickCreateClassroomButton'\n    'click .create-teacher-btn': 'onClickCreateTeacherButton'\n    'click .update-teacher-btn': 'onClickUpdateTeacherButton'\n    'click .view-class-btn': 'onClickViewClassButton'\n\n  getTitle: -> return $.i18n.t('teacher.my_classes')\n\n  initialize: (options) ->\n    super(options)\n    @classrooms = new Classrooms()\n    @classrooms.comparator = (a, b) -> b.id.localeCompare(a.id)\n    @classrooms.fetchMine()\n    @supermodel.trackCollection(@classrooms)\n    @listenTo @classrooms, 'sync', ->\n      for classroom in @classrooms.models\n        classroom.sessions = new LevelSessions()\n        jqxhrs = classroom.sessions.fetchForAllClassroomMembers(classroom)\n        if jqxhrs.length > 0\n          @supermodel.trackCollection(classroom.sessions)\n    window.tracker?.trackEvent 'Teachers Classes Loaded', category: 'Teachers', ['Mixpanel']\n\n    @courses = new Courses()\n    @courses.fetch()\n    @supermodel.trackCollection(@courses)\n\n    @courseInstances = new CourseInstances()\n    @courseInstances.fetchByOwner(me.id)\n    @supermodel.trackCollection(@courseInstances)\n    @progressDotTemplate = require 'templates/teachers/hovers/progress-dot-whole-course'\n\n    # Level Sessions loaded after onLoaded to prevent race condition in calculateDots\n\n  afterRender: ->\n    super()\n    $('.progress-dot').each (i, el) ->\n      dot = $(el)\n      dot.tooltip({\n        html: true\n        container: dot\n      })\n\n  onLoaded: ->\n    helper.calculateDots(@classrooms, @courses, @courseInstances)\n    super()\n\n  onClickEditClassroom: (e) ->\n    classroomID = $(e.target).data('classroom-id')\n    window.tracker?.trackEvent $(e.target).data('event-action'), category: 'Teachers', classroomID: classroomID, ['Mixpanel']\n    classroom = @classrooms.get(classroomID)\n    modal = new ClassroomSettingsModal({ classroom: classroom })\n    @openModalView(modal)\n    @listenToOnce modal, 'hide', @render\n\n  onClickCreateClassroomButton: (e) ->\n    window.tracker?.trackEvent 'Teachers Classes Create New Class Started', category: 'Teachers', ['Mixpanel']\n    classroom = new Classroom({ ownerID: me.id })\n    modal = new ClassroomSettingsModal({ classroom: classroom })\n    @openModalView(modal)\n    @listenToOnce modal.classroom, 'sync', ->\n      window.tracker?.trackEvent 'Teachers Classes Create New Class Finished', category: 'Teachers', ['Mixpanel']\n      @classrooms.add(modal.classroom)\n      @addFreeCourseInstances()\n      @render()\n\n  onClickCreateTeacherButton: (e) ->\n    window.tracker?.trackEvent $(e.target).data('event-action'), category: 'Teachers', ['Mixpanel']\n    application.router.navigate(\"/teachers/signup\", { trigger: true })\n\n  onClickUpdateTeacherButton: (e) ->\n    window.tracker?.trackEvent $(e.target).data('event-action'), category: 'Teachers', ['Mixpanel']\n    application.router.navigate(\"/teachers/update-account\", { trigger: true })\n\n  onClickAddStudentsButton: (e) ->\n    window.tracker?.trackEvent 'Teachers Classes Add Students Started', category: 'Teachers', ['Mixpanel']\n    classroomID = $(e.currentTarget).data('classroom-id')\n    classroom = @classrooms.get(classroomID)\n    modal = new InviteToClassroomModal({ classroom: classroom })\n    @openModalView(modal)\n    @listenToOnce modal, 'hide', @render\n\n  onClickArchiveClassroom: (e) ->\n    classroomID = $(e.currentTarget).data('classroom-id')\n    classroom = @classrooms.get(classroomID)\n    classroom.set('archived', true)\n    classroom.save {}, {\n      success: =>\n        window.tracker?.trackEvent 'Teachers Classes Archived Class', category: 'Teachers', ['Mixpanel']\n        @render()\n    }\n\n  onClickUnarchiveClassroom: (e) ->\n    classroomID = $(e.currentTarget).data('classroom-id')\n    classroom = @classrooms.get(classroomID)\n    classroom.set('archived', false)\n    classroom.save {}, {\n      success: =>\n        window.tracker?.trackEvent 'Teachers Classes Unarchived Class', category: 'Teachers', ['Mixpanel']\n        @render()\n    }\n\n  onClickViewClassButton: (e) ->\n    classroomID = $(e.target).data('classroom-id')\n    window.tracker?.trackEvent $(e.target).data('event-action'), category: 'Teachers', classroomID: classroomID, ['Mixpanel']\n    application.router.navigate(\"/teachers/classes/#{classroomID}\", { trigger: true })\n\n  addFreeCourseInstances: ->\n    # so that when students join the classroom, they can automatically get free courses\n    # non-free courses are generated when the teacher first adds a student to them\n    for classroom in @classrooms.models\n      for course in @courses.models\n        continue if not course.get('free')\n        courseInstance = @courseInstances.findWhere({classroomID: classroom.id, courseID: course.id})\n        if not courseInstance\n          courseInstance = new CourseInstance({\n            classroomID: classroom.id\n            courseID: course.id\n          })\n          # TODO: figure out a better way to get around triggering validation errors for properties\n          # that the server will end up filling in, like an empty members array, ownerID\n          courseInstance.save(null, {validate: false})\n          @courseInstances.add(courseInstance)\n          @listenToOnce courseInstance, 'sync', @addFreeCourseInstances\n          return\n"]}