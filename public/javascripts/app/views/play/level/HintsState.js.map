{"version":3,"sources":["app/views/play/level/HintsState.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,UAAU,QAAQ,gBAAR;;AAEV,MAAM,CAAC,OAAP,GAAuB;;;;;;;uBAErB,aAAY,SAAC,UAAD,EAAa,OAAb;IACR,IAAC,sBAAH,EAAU,IAAC,0BAAX,EAAoB,IAAC;IACrB,IAAC,SAAD,CAAU,IAAC,MAAX,EAAkB,sBAAlB,EAA0C,IAAC,OAA3C;WACA,IAAC,OAAD;EAHU;;uBAKZ,UAAS,SAAC,KAAD;AACP;kDAAe;EADR;;uBAGT,SAAQ;AACN;IAAA,WAAW,IAAC,WAAU,CAAC,SAAZ,CAAsB,OAAtB;IACX,+DAAqC;IACrC,UAAU,CAAC,CAAC,MAAF;;AAAU;AAAA;WAAA;;;;0BAAsE,CAAE;AAAxE;;QAAV;IACV,WAAW,IAAI,CAAC,gBAAL,IAAyB;IACpC,QAAQ,CAAC,IAAI,CAAC,MAAL,IAAe,IAAI,CAAC,KAApB,IAA6B,EAA9B,CAAiC,CAAC,MAAlC,CAAyC,QAAzC,CAAkD,CAAC,MAAnD,CAA0D,OAA1D;IACR,QAAQ,CAAC,CAAC,MAAF,CAAS,KAAT,EAAgB,SAAC,GAAD;MACtB,IAAa,GAAG,CAAC,IAAJ,KAAY,OAAzB;AAAA,eAAO,CAAC,EAAR;;AACA,aAAO;IAFe,CAAhB;IAIR,QAAQ,CAAC,CAAC,IAAF,CAAO,KAAP;WACR,IAAC,IAAD,CAAK;MACH,YADG;MAEH,YAFG;KAAL;EAXM;;;;GAVgC,QAAQ,CAAC","file":"public/javascripts/app/views/play/level/HintsState.js","sourcesContent":["Article = require 'models/Article'\n\nmodule.exports = class HintsState extends Backbone.Model\n\n  initialize: (attributes, options) ->\n    { @level, @session, @supermodel } = options\n    @listenTo(@level, 'change:documentation', @update)\n    @update()\n\n  getHint: (index) ->\n    @get('hints')?[index]\n\n  update: ->\n    articles = @supermodel.getModels(Article)\n    docs = @level.get('documentation') ? {}\n    general = _.filter (_.find(articles, (article) -> article.get('original') is doc.original)?.attributes for doc in docs.generalArticles or [])\n    specific = docs.specificArticles or []\n    hints = (docs.hintsB or docs.hints or []).concat(specific).concat(general)\n    hints = _.sortBy hints, (doc) ->\n      return -1 if doc.name is 'Intro'\n      return 0\n\n    total = _.size(hints)\n    @set({\n      hints\n      total\n    })\n"]}