{"version":3,"sources":["app/templates/teachers/convert-to-teacher-account-view.jade","app/views/teachers/ConvertToTeacherAccountView.coffee"],"names":[],"mappings":"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","file":"public/javascripts/app/views/teachers/ConvertToTeacherAccountView.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),me = locals_.me,serverConfig = locals_.serverConfig,view = locals_.view;var accountLinks_mixin = function(){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\"), 'data-i18n':(\"nav.profile\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li><li><a href=\\\"/account/settings\\\" data-i18n=\\\"play.settings\\\"></a></li><li><a id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\"></a></li>\");\n};\nbuf.push(\"<div class=\\\"style-flat\\\"><nav id=\\\"main-nav\\\" class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid container\\\"><div class=\\\"row\\\"><div class=\\\"col-md-12\\\"><div class=\\\"navbar-header\\\"><button data-toggle=\\\"collapse\\\" data-target=\\\"#navbar-collapse\\\" aria-expanded=\\\"false\\\" class=\\\"navbar-toggle collapsed\\\"><span data-i18n=\\\"nav.toggle_nav\\\" class=\\\"sr-only\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span></button><a href=\\\"/\\\" class=\\\"navbar-brand\\\">\");\nif ( serverConfig.codeNinjas)\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\" class=\\\"code-ninjas-powered-by\\\"/><img src=\\\"/images/pages/base/code-ninjas-logo-right.png\\\" class=\\\"code-ninjas-logo\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\"/>\");\n}\nbuf.push(\"<span class=\\\"glyphicon glyphicon-home\\\"></span></a></div><div id=\\\"navbar-collapse\\\" class=\\\"collapse navbar-collapse\\\"><ul class=\\\"nav navbar-nav\\\">\");\nif ( (!me.isStudent() && !me.isTeacher()))\n{\nbuf.push(\"<li><a href=\\\"/play\\\" data-i18n=\\\"common.play\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a></li>\");\nif ( me.isStudent())\n{\nbuf.push(\"<li><a href=\\\"/students\\\" data-i18n=\\\"nav.my_courses\\\"></a></li>\");\n}\nif ( !me.isAnonymous() && me.isTeacher())\n{\nbuf.push(\"<li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li><li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li></ul>\");\nif ( me.isAnonymous())\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><a id=\\\"create-account-link\\\" data-i18n=\\\"login.sign_up\\\" class=\\\"signup-button\\\"></a></li><li><a id=\\\"login-link\\\" data-i18n=\\\"login.log_in\\\" class=\\\"login-button\\\"></a></li></ul>\");\n}\nelse\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav hidden-md hidden-lg\\\"><li class=\\\"disabled\\\"><a><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span>\" + (jade.escape(null == (jade.interp = me.displayName()) ? \"\" : jade.interp)) + \"</span></a></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul><ul class=\\\"nav navbar-nav\\\"><li class=\\\"dropdown hidden-xs hidden-sm\\\"><a href=\\\"#\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" class=\\\"dropdown-toggle\\\"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span data-i18n=\\\"nav.my_account\\\"></span></a><ul class=\\\"dropdown-menu\\\"><li class=\\\"user-dropdown-header text-center\\\"><span class=\\\"user-level\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\") }, {\"href\":true})) + \"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/></a><h5>\" + (jade.escape(null == (jade.interp = me.broadName()) ? \"\" : jade.interp)) + \"</h5></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul></li></ul>\");\n}\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><div id=\\\"language-dropdown-wrapper\\\"><select class=\\\"language-dropdown form-control\\\"></select></div></li></ul></div></div></div></div></nav><div id=\\\"site-content-area\\\"><div id=\\\"learn-more-modal\\\" class=\\\"modal fade\\\"><div class=\\\"modal-dialog modal-sm\\\"><div class=\\\"modal-content style-flat\\\"><div class=\\\"modal-header\\\"><div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div></div><div data-i18n=\\\"teachers_quote.learn_more_modal\\\" class=\\\"modal-body\\\"></div></div></div></div><div class=\\\"container\\\"><form><div class=\\\"row text-center\\\"><div class=\\\"col-md-offset-2 col-md-8\\\"><h3 data-i18n=\\\"teachers_quote.convert_account_title\\\" class=\\\"m-t-3\\\"></h3><h4 data-i18n=\\\"[html]teachers_quote.create_account_subtitle\\\"></h4><div class=\\\"alert alert-info m-y-2\\\"><div><span data-i18n=\\\"teachers_quote.not\\\" class=\\\"spr\\\"></span><strong>\" + (jade.escape(null == (jade.interp = me.broadName()) ? \"\" : jade.interp)) + \"</strong>?<a id=\\\"logout-link\\\" data-i18n=\\\"login.log_out\\\" class=\\\"spl\\\"></a></div>\");\nif ( me.get('role') === 'student')\n{\nbuf.push(\"<div id=\\\"conversion-warning\\\" class=\\\"m-t-2\\\"><span data-i18n=\\\"[html]teachers_quote.conversion_warning\\\" class=\\\"spr\\\"></span><a data-i18n=\\\"new_home.learn_more\\\" data-toggle=\\\"modal\\\" data-target=\\\"#learn-more-modal\\\"></a></div>\");\n}\nbuf.push(\"</div></div></div><div class=\\\"row m-y-2\\\"><div class=\\\"col-md-offset-2 col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span data-i18n=\\\"general.username\\\" class=\\\"control-label\\\"></span><input\" + (jade.attrs({ 'disabled':(true), 'value':(me.get('name')), \"class\": [('form-control')] }, {\"disabled\":true,\"value\":true})) + \"/></div></div><div class=\\\"col-md-4 col-sm-6\\\"><div id=\\\"email-form-group\\\" class=\\\"form-group\\\"><span data-i18n=\\\"general.email\\\" class=\\\"control-label\\\"></span><input\" + (jade.attrs({ 'name':('email'), 'disabled':(true), 'value':(me.get('email')), \"class\": [('form-control')] }, {\"name\":true,\"disabled\":true,\"value\":true})) + \"/></div></div></div><div class=\\\"row m-y-2\\\"><div class=\\\"col-md-offset-2 col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span data-i18n=\\\"general.first_name\\\" class=\\\"control-label\\\"></span><input\" + (jade.attrs({ 'name':(\"firstName\"), 'value':(me.get('firstName') || ''), \"class\": [('form-control')] }, {\"name\":true,\"value\":true})) + \"/></div></div><div class=\\\"col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span data-i18n=\\\"general.last_name\\\" class=\\\"control-label\\\"></span><input\" + (jade.attrs({ 'name':(\"lastName\"), 'value':(me.get('lastName') || ''), \"class\": [('form-control')] }, {\"name\":true,\"value\":true})) + \"/></div></div></div><div class=\\\"row m-y-2\\\"><div class=\\\"col-md-offset-2 col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span class=\\\"control-label\\\"><span data-i18n=\\\"teachers_quote.phone_number\\\"></span><span data-i18n=\\\"signup.optional\\\" class=\\\"spl text-muted\\\"></span></span><input name=\\\"phoneNumber\\\" data-i18n=\\\"[placeholder]teachers_quote.phone_number_help\\\" class=\\\"form-control\\\"/></div></div><div class=\\\"col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span data-i18n=\\\"teachers_quote.primary_role_label\\\" class=\\\"control-label\\\"></span><select name=\\\"role\\\" class=\\\"form-control\\\"><option data-i18n=\\\"teachers_quote.role_default\\\" ,=\\\",\\\" value=\\\"\\\"></option><option data-i18n=\\\"courses.teacher\\\" value=\\\"Teacher\\\"></option><option data-i18n=\\\"teachers_quote.tech_coordinator\\\" value=\\\"Technology coordinator\\\"></option><option data-i18n=\\\"teachers_quote.advisor\\\" value=\\\"Advisor\\\"></option><option data-i18n=\\\"teachers_quote.principal\\\" value=\\\"Principal\\\"></option><option data-i18n=\\\"teachers_quote.superintendent\\\" value=\\\"Superintendent\\\"></option><option data-i18n=\\\"teachers_quote.parent\\\" value=\\\"Parent\\\"></option></select></div></div></div><div id=\\\"form-school-info\\\"><div class=\\\"row m-y-2\\\"><div class=\\\"col-md-offset-2 col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span class=\\\"control-label\\\"><span data-i18n=\\\"teachers_quote.organization_label\\\"></span><span data-i18n=\\\"signup.optional\\\" class=\\\"spl text-muted\\\"></span></span><input id=\\\"organization-control\\\" name=\\\"organization\\\" class=\\\"form-control\\\"/></div></div><div class=\\\"col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span data-i18n=\\\"teachers_quote.district_label\\\" class=\\\"control-label form-control nullify-form-control\\\"></span><input id=\\\"district-control\\\" name=\\\"district\\\" data-i18n=\\\"[placeholder]teachers_quote.district_na\\\" class=\\\"form-control\\\"/></div></div></div><div class=\\\"row m-y-2\\\"><div class=\\\"col-md-offset-2 col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span data-i18n=\\\"teachers_quote.city\\\" class=\\\"control-label\\\"></span><input name=\\\"city\\\" class=\\\"form-control\\\"/></div></div><div class=\\\"col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span data-i18n=\\\"teachers_quote.state\\\" class=\\\"control-label\\\"></span><input name=\\\"state\\\" class=\\\"form-control\\\"/></div></div></div><div class=\\\"row m-y-2\\\"><div class=\\\"col-md-offset-2 col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span data-i18n=\\\"teachers_quote.country\\\" class=\\\"control-labelspan control-label\\\"></span><input name=\\\"country\\\" class=\\\"form-control\\\"/></div></div></div></div><div id=\\\"form-students-info\\\"><div class=\\\"row m-y-2\\\"><div class=\\\"col-md-offset-2 col-md-4\\\"><div class=\\\"form-group\\\"><span data-i18n=\\\"courses.number_programming_students\\\" class=\\\"control-label\\\"></span><div class=\\\"help-block small\\\"><em data-i18n=\\\"teachers_quote.num_students_help\\\" class=\\\"text-info\\\"></em></div><select name=\\\"numStudents\\\" class=\\\"form-control\\\"><option data-i18n=\\\"teachers_quote.num_students_default\\\" value=\\\"\\\"></option><option>1-10</option><option>11-50</option><option>51-100</option><option>101-200</option><option>201-500</option><option>501-1000</option><option>1000+</option></select></div></div><div class=\\\"col-md-4 col-sm-6\\\"><div class=\\\"form-group\\\"><span class=\\\"control-label\\\"><span data-i18n=\\\"courses.number_total_students\\\"></span><span data-i18n=\\\"signup.optional\\\" class=\\\"spl text-muted\\\"></span></span><select name=\\\"numStudentsTotal\\\" class=\\\"form-control\\\"><option data-i18n=\\\"teachers_quote.num_students_default\\\" value=\\\"\\\"></option><option>1-500</option><option>500-1,000</option><option>1,000-5,000</option><option>5,000-10,000</option><option>10,000+</option></select></div></div></div><div class=\\\"form-group\\\"><div class=\\\"row m-y-2\\\"><div class=\\\"col-md-offset-2 col-md-4\\\"><span data-i18n=\\\"teachers_quote.education_level_label\\\" class=\\\"control-label\\\"></span><div class=\\\"help-block small\\\"><em data-i18n=\\\"teachers_quote.education_level_help\\\" class=\\\"text-info\\\"></em></div><div class=\\\"checkbox\\\"><label><input type=\\\"checkbox\\\" name=\\\"educationLevel\\\" value=\\\"Elementary\\\"/><span data-i18n=\\\"teachers_quote.elementary_school\\\"></span></label></div><div class=\\\"checkbox\\\"><label><input type=\\\"checkbox\\\" name=\\\"educationLevel\\\" value=\\\"Middle\\\"/><span data-i18n=\\\"teachers_quote.middle_school\\\"></span></label></div><div class=\\\"checkbox\\\"><label><input type=\\\"checkbox\\\" name=\\\"educationLevel\\\" value=\\\"High\\\"/><span data-i18n=\\\"teachers_quote.high_school\\\"></span></label></div><div class=\\\"checkbox\\\"><label><input type=\\\"checkbox\\\" name=\\\"educationLevel\\\" value=\\\"College+\\\"/><span data-i18n=\\\"teachers_quote.college_plus\\\"></span></label></div><div class=\\\"checkbox\\\"><label><input id=\\\"other-education-level-checkbox\\\" type=\\\"checkbox\\\"/><span data-i18n=\\\"nav.other\\\" class=\\\"spr\\\"></span><span data-i18n=\\\"teachers_quote.please_explain\\\"></span></label></div><input id=\\\"other-education-level-input\\\" class=\\\"form-control\\\"/></div></div></div></div><div id=\\\"anything-else-row\\\" class=\\\"row m-y-2\\\"><div class=\\\"col-md-offset-2 col-md-8\\\"><span class=\\\"control-label\\\"><span data-i18n=\\\"teachers_quote.anything_else\\\"></span><span data-i18n=\\\"signup.optional\\\" class=\\\"spl text-muted\\\"></span></span><textarea rows=\\\"8\\\" name=\\\"notes\\\" class=\\\"form-control\\\"></textarea><input type=\\\"hidden\\\" name=\\\"nces_id\\\"/><input type=\\\"hidden\\\" name=\\\"nces_name\\\"/><input type=\\\"hidden\\\" name=\\\"nces_district\\\"/><input type=\\\"hidden\\\" name=\\\"nces_district_id\\\"/><input type=\\\"hidden\\\" name=\\\"nces_district_schools\\\"/><input type=\\\"hidden\\\" name=\\\"nces_district_students\\\"/><input type=\\\"hidden\\\" name=\\\"nces_students\\\"/><input type=\\\"hidden\\\" name=\\\"nces_phone\\\"/></div></div><div id=\\\"buttons-row\\\" class=\\\"row m-y-2 text-center\\\"><input id=\\\"create-account-btn\\\" type=\\\"submit\\\" data-i18n=\\\"[value]teachers_quote.convert_account_title\\\" class=\\\"btn btn-lg btn-primary\\\"/></div></form></div></div><div class=\\\"container-fluid\\\"><div id=\\\"footer\\\" class=\\\"small\\\"><div class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong>CodeCombat</strong></li><li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li><li><a href=\\\"/about#jobs\\\" data-i18n=\\\"nav.jobs\\\"></a></li><li><a href=\\\"http://blog.codecombat.com/\\\" data-i18n=\\\"nav.blog\\\"></a></li><li><a href=\\\"/legal\\\" data-i18n=\\\"nav.legal\\\"></a></li><li><a href=\\\"/privacy\\\" data-i18n=\\\"nav.privacy\\\"></a></li></ul></div>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.schools\\\"></strong></li><li><a href=\\\"/teachers/resources/faq\\\" data-i18n=\\\"teacher.educator_faq\\\"></a></li><li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li><li><a href=\\\"/teachers/resources\\\" data-i18n=\\\"nav.resource_hub\\\"></a></li><li><a href=\\\"/teachers/demo\\\" data-i18n=\\\"new_home.request_demo\\\"></a></li></ul></div>\");\n}\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.get_involved\\\"></strong></li><li><a href=\\\"/community\\\" data-i18n=\\\"nav.community\\\"></a></li><li><a href=\\\"/contribute\\\" data-i18n=\\\"nav.contribute\\\"></a></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"/play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a></li><li><a href=\\\"https://github.com/codecombat/codecombat\\\" data-i18n=\\\"nav.open_source\\\"></a></li></ul></div><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.support\\\"></strong></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a tabindex=\\\"-1\\\" data-i18n=\\\"nav.contact\\\" class=\\\"contact-modal\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"https://www.facebook.com/codecombat\\\" data-i18n=\\\"nav.facebook\\\"></a></li><li><a href=\\\"https://twitter.com/codecombat\\\" data-i18n=\\\"nav.twitter\\\"></a></li></ul></div></div></div></div><div id=\\\"final-footer\\\" class=\\\"small text-center\\\">Copyright Â©2016 CodeCombat. All Rights Reserved.<br class=\\\"hidden-lg hidden-md\\\"/><img src=\\\"/images/pages/base/logo.png\\\" alt=\\\"CodeCombat\\\"/><br class=\\\"hidden-lg hidden-md\\\"/>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<span data-i18n=\\\"nav.help_pref\\\" class=\\\"spr\\\"></span>\");\nvar supportEmail = (me.get('preferredLanguage', true) || 'en-US').split('-')[0] == 'nl' ? 'klantenservice@codecombat.nl' : 'team@codecombat.com';\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"mailto:\" + supportEmail) }, {\"href\":true})) + \">\" + (jade.escape(null == (jade.interp = supportEmail) ? \"\" : jade.interp)) + \"</a><span data-i18n=\\\"nav.help_suff\\\" class=\\\"spl\\\"></span>\");\n}\nbuf.push(\"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","RootView = require 'views/core/RootView'\r\nforms = require 'core/forms'\r\nTrialRequest = require 'models/TrialRequest'\r\nTrialRequests = require 'collections/TrialRequests'\r\nAuthModal = require 'views/core/AuthModal'\r\nerrors = require 'core/errors'\r\nUser = require 'models/User'\r\nConfirmModal = require 'views/core/ConfirmModal'\r\nalgolia = require 'core/services/algolia'\r\n\r\nDISTRICT_NCES_KEYS = ['district', 'district_id', 'district_schools', 'district_students', 'phone']\r\nSCHOOL_NCES_KEYS = DISTRICT_NCES_KEYS.concat(['id', 'name', 'students'])\r\n\r\nmodule.exports = class ConvertToTeacherAccountView extends RootView\r\n  id: 'convert-to-teacher-account-view'\r\n  template: require 'templates/teachers/convert-to-teacher-account-view'\r\n  logoutRedirectURL: null\r\n\r\n  events:\r\n    'change form': 'onChangeForm'\r\n    'submit form': 'onSubmitForm'\r\n    'click #logout-link': -> me.logout()\r\n    'change input[name=\"city\"]': 'invalidateNCES'\r\n    'change input[name=\"state\"]': 'invalidateNCES'\r\n    'change input[name=\"district\"]': 'invalidateNCES'\r\n    'change input[name=\"country\"]': 'invalidateNCES'\r\n\r\n  initialize: ->\r\n    if me.isAnonymous()\r\n      application.router.navigate('/teachers/signup', {trigger: true, replace: true})\r\n      return\r\n    @trialRequest = new TrialRequest()\r\n    @trialRequests = new TrialRequests()\r\n    @trialRequests.fetchOwn()\r\n    @supermodel.trackCollection(@trialRequests)\r\n    window.tracker?.trackEvent 'Teachers Convert Account Loaded', category: 'Teachers', ['Mixpanel']\r\n\r\n  onLeaveMessage: ->\r\n    if @formChanged\r\n      return 'Your account has not been updated! If you continue, your changes will be lost.'\r\n\r\n  invalidateNCES: ->\r\n    for key in SCHOOL_NCES_KEYS\r\n      @$('input[name=\"nces_' + key + '\"]').val ''\r\n\r\n  onLoaded: ->\r\n    if @trialRequests.size() and me.isTeacher()\r\n      return application.router.navigate('/teachers', { trigger: true, replace: true })\r\n\r\n    super()\r\n\r\n  afterRender: ->\r\n    super()\r\n\r\n    # apply existing trial request on form\r\n    properties = @trialRequest.get('properties')\r\n    if properties\r\n      forms.objectToForm(@$('form'), properties)\r\n      commonLevels = _.map @$('[name=\"educationLevel\"]'), (el) -> $(el).val()\r\n      submittedLevels = properties.educationLevel or []\r\n      otherLevel = _.first(_.difference(submittedLevels, commonLevels)) or ''\r\n      @$('#other-education-level-checkbox').attr('checked', !!otherLevel)\r\n      @$('#other-education-level-input').val(otherLevel)\r\n\r\n    $(\"#organization-control\").algolia_autocomplete({hint: false}, [\r\n      source: (query, callback) ->\r\n        algolia.schoolsIndex.search(query, { hitsPerPage: 5, aroundLatLngViaIP: false }).then (answer) ->\r\n          callback answer.hits\r\n        , ->\r\n          callback []\r\n      displayKey: 'name',\r\n      templates:\r\n        suggestion: (suggestion) ->\r\n          hr = suggestion._highlightResult\r\n          \"<div class='school'> #{hr.name.value} </div>\" +\r\n            \"<div class='district'>#{hr.district.value}, \" +\r\n              \"<span>#{hr.city?.value}, #{hr.state.value}</span></div>\"\r\n    ]).on 'autocomplete:selected', (event, suggestion, dataset) =>\r\n      @$('input[name=\"district\"]').val suggestion.district\r\n      @$('input[name=\"city\"]').val suggestion.city\r\n      @$('input[name=\"state\"]').val suggestion.state\r\n      @$('input[name=\"country\"]').val 'USA'\r\n      for key in SCHOOL_NCES_KEYS\r\n        @$('input[name=\"nces_' + key + '\"]').val suggestion[key]\r\n      @onChangeForm()\r\n\r\n    $(\"#district-control\").algolia_autocomplete({hint: false}, [\r\n      source: (query, callback) ->\r\n        algolia.schoolsIndex.search(query, { hitsPerPage: 5, aroundLatLngViaIP: false }).then (answer) ->\r\n          callback answer.hits\r\n        , ->\r\n          callback []\r\n      displayKey: 'district',\r\n      templates:\r\n        suggestion: (suggestion) ->\r\n          hr = suggestion._highlightResult\r\n          \"<div class='district'>#{hr.district.value}, \" +\r\n            \"<span>#{hr.city?.value}, #{hr.state.value}</span></div>\"\r\n    ]).on 'autocomplete:selected', (event, suggestion, dataset) =>\r\n      @$('input[name=\"organization\"]').val '' # TODO: does not persist on tabbing: back to school, back to district\r\n      @$('input[name=\"city\"]').val suggestion.city\r\n      @$('input[name=\"state\"]').val suggestion.state\r\n      @$('input[name=\"country\"]').val 'USA'\r\n      for key in DISTRICT_NCES_KEYS\r\n        @$('input[name=\"nces_' + key + '\"]').val suggestion[key]\r\n      @onChangeForm()\r\n\r\n  onChangeForm: ->\r\n    unless @formChanged\r\n      window.tracker?.trackEvent 'Teachers Convert Account Form Started', category: 'Teachers', ['Mixpanel']\r\n    @formChanged = true\r\n\r\n  onSubmitForm: (e) ->\r\n    e.preventDefault()\r\n\r\n    form = @$('form')\r\n    attrs = forms.formToObject(form)\r\n    trialRequestAttrs = _.cloneDeep(attrs)\r\n\r\n    # Don't save n/a district entries, but do validate required district client-side\r\n    trialRequestAttrs = _.omit(trialRequestAttrs, 'district') if trialRequestAttrs.district?.replace(/\\s/ig, '').match(/^n\\/?a$/ig)\r\n\r\n    if @$('#other-education-level-checkbox').is(':checked')\r\n      val = @$('#other-education-level-input').val()\r\n      trialRequestAttrs.educationLevel.push(val) if val\r\n\r\n    forms.clearFormAlerts(form)\r\n\r\n    result = tv4.validateMultiple(trialRequestAttrs, formSchema)\r\n    error = false\r\n    if not result.valid\r\n      forms.applyErrorsToForm(form, result.errors)\r\n      error = true\r\n    if not _.size(trialRequestAttrs.educationLevel)\r\n      forms.setErrorToProperty(form, 'educationLevel', 'include at least one')\r\n      error = true\r\n    unless attrs.district\r\n      forms.setErrorToProperty(form, 'district', $.i18n.t('common.required_field'))\r\n      error = true\r\n    if error\r\n      forms.scrollToFirstError()\r\n      return\r\n    trialRequestAttrs['siteOrigin'] = 'convert teacher'\r\n    @trialRequest = new TrialRequest({\r\n      type: 'course'\r\n      properties: trialRequestAttrs\r\n    })\r\n    if me.get('role') is 'student' and not me.isAnonymous()\r\n      modal = new ConfirmModal({\r\n        title: ''\r\n        body: \"<p>#{$.i18n.t('teachers_quote.conversion_warning')}</p><p>#{$.i18n.t('teachers_quote.learn_more_modal')}</p>\"\r\n        confirm: $.i18n.t('common.continue')\r\n        decline: $.i18n.t('common.cancel')\r\n      })\r\n      @openModalView(modal)\r\n      modal.once 'confirm', @saveTrialRequest, @\r\n    else\r\n      @saveTrialRequest()\r\n\r\n  saveTrialRequest: ->\r\n    @trialRequest.notyErrors = false\r\n    @$('#create-account-btn').text('Sending').attr('disabled', true)\r\n    @trialRequest.save()\r\n    @trialRequest.on 'sync', @onTrialRequestSubmit, @\r\n    @trialRequest.on 'error', @onTrialRequestError, @\r\n\r\n  onTrialRequestError: (model, jqxhr) ->\r\n    @$('#submit-request-btn').text('Submit').attr('disabled', false)\r\n    errors.showNotyNetworkError(arguments...)\r\n\r\n  onTrialRequestSubmit: ->\r\n    window.tracker?.trackEvent 'Teachers Convert Account Submitted', category: 'Teachers', ['Mixpanel']\r\n    @formChanged = false\r\n    me.setRole @trialRequest.get('properties').role.toLowerCase(), true\r\n    application.router.navigate('/teachers/classes', {trigger: true})\r\n\r\nformSchema = {\r\n  type: 'object'\r\n  required: ['firstName', 'lastName', 'role', 'numStudents', 'city', 'state', 'country']\r\n  properties:\r\n    firstName: { type: 'string' }\r\n    lastName: { type: 'string' }\r\n    phoneNumber: { type: 'string' }\r\n    role: { type: 'string' }\r\n    organization: { type: 'string' }\r\n    district: { type: 'string' }\r\n    city: { type: 'string' }\r\n    state: { type: 'string' }\r\n    country: { type: 'string' }\r\n    numStudents: { type: 'string' }\r\n    numStudentsTotal: { type: 'string' }\r\n    educationLevel: {\r\n      type: 'array'\r\n      items: { type: 'string' }\r\n    }\r\n    notes: { type: 'string' }\r\n}\r\n\r\nfor key in SCHOOL_NCES_KEYS\r\n  formSchema['nces_' + key] = type: 'string'\r\n"]}