{"version":3,"sources":["app/templates/account/prepaid-redeem-modal.jade","app/views/account/PrepaidRedeemModal.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,sBAAR;;AACZ,WAAW,QAAQ,wCAAR;;AACV,KAAM,QAAQ,WAAR,EAAN;;AAGD,MAAM,CAAC,OAAP,GAAuB;;;+BACrB,KAAI;;+BACJ,WAAU;;+BACV,cAAa;;+BAEb,SACE;IAAA,iBAAkB,iBAAlB;;;EAEW,4BAAC,OAAD;AACX;IAAA,oDAAM,OAAN;IACA,IAAC,IAAD,GAAO,OAAO,CAAC;IACf,cAAc,IAAC,IAAG,CAAC,eAAL,CAAqB,EAAE,CAAC,GAAH,CAAO,KAAP,CAArB;IACd,IAAoD,WAApD;MAAA,IAAC,WAAD,GAAkB,WAAO,WAAP,CAAmB,CAAC,QAApB,GAAlB;;EAJW;;+BAMb,kBAAiB;WACf,IAAC,QAAD,CAAS,gBAAT;EADe;;;;GAd+B","file":"public/javascripts/app/views/account/PrepaidRedeemModal.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h3>Prepaid Code Details (\" + (jade.escape((jade.interp = view.ppc.get('code')) == null ? '' : jade.interp)) + \")</h3></div><div class=\\\"modal-body\\\">\");\nif ( view.redeemedOn)\n{\nbuf.push(\"<p>You redeemed this code: \" + (jade.escape((jade.interp = view.redeemedOn) == null ? '' : jade.interp)) + \"</p>\");\n}\nelse\n{\nif ( view.ppc.openSpots())\n{\nbuf.push(\"<p><strong>Adds \" + (jade.escape((jade.interp = view.ppc.get('properties').months) == null ? '' : jade.interp)) + \" month(s) to your current subscription.</strong></p><p>You can redeem this code.</p>\");\n}\nelse\n{\nbuf.push(\"<p>You cannot redeem this code. </p>\");\n}\n}\nbuf.push(\"</div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><button id=\\\"close\\\" type=\\\"button\\\" data-dismiss=\\\"modal\\\" class=\\\"btn btn-primary\\\">Cancel</button>\");\nif ( !view.redeemedOn && view.ppc.openSpots() > 0)\n{\nbuf.push(\"<button id=\\\"redeem\\\" type=\\\"button\\\" data-dismiss=\\\"modal\\\" class=\\\"btn btn-primary\\\">Redeem Code To My Account</button>\");\n}\nbuf.push(\"</div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ModalView = require 'views/core/ModalView'\ntemplate = require 'templates/account/prepaid-redeem-modal'\n{me} = require 'core/auth'\n\n\nmodule.exports = class PrepaidRedeemModal extends ModalView\n  id: 'prepaid-redeem-modal'\n  template: template\n  closeButton: true\n\n  events:\n    'click #redeem' : 'onRedeemClicked'\n\n  constructor: (options) ->\n    super options\n    @ppc = options.ppc\n    hasRedeemed = @ppc.userHasRedeemed(me.get('_id'))\n    @redeemedOn = new moment(hasRedeemed).calendar() if hasRedeemed\n\n  onRedeemClicked: ->\n    @trigger 'confirm-redeem'\n"]}