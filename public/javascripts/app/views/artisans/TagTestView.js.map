{"version":3,"sources":["app/templates/artisans/tag-test-view.jade","app/views/artisans/TagTestView.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvFA;AAAA;;ACAA;EAAA;;;;AAAA,WAAW,QAAQ,qBAAR;;AACX,WAAW,QAAQ,qBAAR;;AACX,WAAW,QAAQ,kCAAR;;AACX,SAAS,QAAQ,2BAAR;;AACT,cAAa,QAAQ,kBAAR;;AAEb,YAAY,QAAQ,kBAAR;;AAEZ,aAAa,QAAQ,wBAAR;;AACb,MAAM,QAAQ,KAAR;;AAEA;;;;;;;0BACJ,WAAU,QAAQ,uCAAR;;0BACV,KAAI;;;;GAFsB;;AAI5B,MAAM,CAAC,OAAP,GAAuB;;;;;;;;2BACrB,WAAU;;2BACV,KAAI;;2BACJ,SACE;IAAA,eAAe,eAAf;IACA,gBAAgB,eADhB;;;2BAGF,aAAY;IACV,IAAC,KAAD,GAAQ;IACR,OAAO,CAAC,GAAR,CAAY,OAAZ;WACA,IAAC,oBAAD,GAAuB,CAAC,CAAC,QAAF,CAAW,IAAC,WAAZ,EAAwB,IAAxB;EAHb;;2BAKZ,cAAa;AACX;IAAA,IAAC,cAAD,CAAe,IAAC,QAAD,GAAe,mBAA9B;IACA,KAAK,IAAC,IAAG,CAAC,IAAL,CAAU,kBAAV;IACL,IAAC,OAAD,GAAU,GAAG,CAAC,IAAJ,CAAS,EAAG,GAAZ;IACV,IAAC,OAAM,CAAC,MAAR;IACA,IAAC,OAAM,CAAC,UAAR,EAAoB,CAAC,OAArB,CAA6B,qBAA7B;IACA,IAAC,OAAM,CAAC,UAAR,EAAoB,CAAC,EAArB,CAAwB,QAAxB,EAAkC;aAAA;QAChC,KAAC,QAAO,CAAC,IAAT,GAAgB;QAChB,KAAC,QAAO,CAAC,KAAT,GAAiB;QACjB,KAAC,QAAO,CAAC,MAAT;eACA,KAAC,oBAAD;MAJgC;IAAA,QAAlC;IAMA,IAAC,OAAM,CAAC,QAAR,CAAiB,YAAY,CAAC,IAAb,IAAmB,EAApC;IACA,IAAC,OAAM,CAAC,KAAR;WACA,IAAC,WAAD;EAdW;;2BAgBb,aAAY;AACV;IAAA,OAAO,IAAC,OAAM,CAAC,QAAR;IACP,IAAC,QAAO,CAAC,IAAT,GAAgB;IAChB,IAAC,QAAO,CAAC,KAAT,GAAiB;IACjB,YAAY,CAAC,IAAb,GAAoB;AACpB;MACE,IAAC,QAAO,CAAC,IAAT,GAAgB,CAAC,CAAC,GAAF,CAAM,OAAO;QAAA,QAAQ,IAAR;OAAP,CAAN,EAA4B,SAAC,CAAD;AAAO;;;;;gCAA0C,CAAE;MAAnD,CAA5B,EADlB;KAAA;MAEM;MACJ,IAAC,QAAO,CAAC,KAAT,GAAiB,CAAC,CAAC,MAHrB;;IAKA,IAAC,QAAO,CAAC,MAAT;WACA,OAAO,CAAC,GAAR,CAAY,aAAZ;EAXU;;;;GA5BgC","file":"public/javascripts/app/views/artisans/TagTestView.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),me = locals_.me,serverConfig = locals_.serverConfig,view = locals_.view;var accountLinks_mixin = function(){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\"), 'data-i18n':(\"nav.profile\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li><li><a href=\\\"/account/settings\\\" data-i18n=\\\"play.settings\\\"></a></li>\");\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/payments\\\" data-i18n=\\\"account.payments\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()) || me.hasSubscription())\n{\nbuf.push(\"<li><a href=\\\"/account/subscription\\\" data-i18n=\\\"account.subscription\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/prepaid\\\" data-i18n=\\\"account.prepaid_codes\\\"></a></li>\");\n}\nbuf.push(\"<li><a id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\"></a></li>\");\n};\nbuf.push(\"<div class=\\\"style-flat\\\"><nav id=\\\"main-nav\\\" class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid container\\\"><div class=\\\"row\\\"><div class=\\\"col-md-12\\\"><div class=\\\"navbar-header\\\"><button data-toggle=\\\"collapse\\\" data-target=\\\"#navbar-collapse\\\" aria-expanded=\\\"false\\\" class=\\\"navbar-toggle collapsed\\\"><span data-i18n=\\\"nav.toggle_nav\\\" class=\\\"sr-only\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span></button><a href=\\\"/\\\" class=\\\"navbar-brand\\\">\");\nif ( serverConfig.codeNinjas)\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\" class=\\\"code-ninjas-powered-by\\\"/><img src=\\\"/images/pages/base/code-ninjas-logo-right.png\\\" class=\\\"code-ninjas-logo\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\"/>\");\n}\nbuf.push(\"<span class=\\\"glyphicon glyphicon-home\\\"></span></a></div><div id=\\\"navbar-collapse\\\" class=\\\"collapse navbar-collapse\\\"><ul class=\\\"nav navbar-nav\\\"><li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li>\");\nif ( me.isStudent())\n{\nbuf.push(\"<li><a href=\\\"/students\\\" data-i18n=\\\"nav.my_courses\\\"></a></li>\");\n}\nif ( !me.isAnonymous() && me.isTeacher())\n{\nbuf.push(\"<li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li>\");\n}\nif ( !me.isAnonymous() && !me.isStudent() && !me.isTeacher())\n{\nbuf.push(\"<li><a href=\\\"/play\\\" data-i18n=\\\"common.play\\\"></a></li><li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li>\");\n}\nbuf.push(\"</ul>\");\nif ( me.isAnonymous())\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><a id=\\\"create-account-link\\\" data-i18n=\\\"login.sign_up\\\" class=\\\"signup-button\\\"></a></li><li><a id=\\\"login-link\\\" data-i18n=\\\"login.log_in\\\" class=\\\"login-button\\\"></a></li></ul>\");\n}\nelse\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav hidden-md hidden-lg\\\"><li class=\\\"disabled\\\"><a><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span>\" + (jade.escape(null == (jade.interp = me.displayName()) ? \"\" : jade.interp)) + \"</span></a></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul><ul class=\\\"nav navbar-nav\\\"><li class=\\\"dropdown hidden-xs hidden-sm\\\"><a href=\\\"#\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" class=\\\"dropdown-toggle\\\"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span data-i18n=\\\"nav.my_account\\\"></span></a><ul class=\\\"dropdown-menu\\\"><li class=\\\"user-dropdown-header text-center\\\"><span class=\\\"user-level\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\") }, {\"href\":true})) + \"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/></a><h5>\" + (jade.escape(null == (jade.interp = me.broadName()) ? \"\" : jade.interp)) + \"</h5></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul></li></ul>\");\n}\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><div id=\\\"language-dropdown-wrapper\\\"><select class=\\\"language-dropdown form-control\\\"></select></div></li></ul></div></div></div></div></nav><div id=\\\"site-content-area\\\"><div class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-md-6\\\"><div id=\\\"editor-container\\\"><div id=\\\"tag-test-editor\\\"></div></div></div><div class=\\\"col-md-6\\\"><div id=\\\"tag-test-tags-view\\\"></div></div></div></div></div><div class=\\\"container-fluid\\\"><div id=\\\"footer\\\" class=\\\"small\\\"><div class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong>CodeCombat</strong></li><li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li><li><a href=\\\"/about#jobs\\\" data-i18n=\\\"nav.jobs\\\"></a></li><li><a href=\\\"http://blog.codecombat.com/\\\" data-i18n=\\\"nav.blog\\\"></a></li><li><a href=\\\"/legal\\\" data-i18n=\\\"nav.legal\\\"></a></li><li><a href=\\\"/privacy\\\" data-i18n=\\\"nav.privacy\\\"></a></li></ul></div>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.schools\\\"></strong></li><li><a href=\\\"/teachers/resources/faq\\\" data-i18n=\\\"teacher.educator_faq\\\"></a></li><li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li><li><a href=\\\"/teachers/resources\\\" data-i18n=\\\"nav.resource_hub\\\"></a></li><li><a href=\\\"/teachers/demo\\\" data-i18n=\\\"new_home.request_demo\\\"></a></li></ul></div>\");\n}\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.get_involved\\\"></strong></li><li><a href=\\\"/community\\\" data-i18n=\\\"nav.community\\\"></a></li><li><a href=\\\"/contribute\\\" data-i18n=\\\"nav.contribute\\\"></a></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"/play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a></li><li><a href=\\\"https://github.com/codecombat/codecombat\\\" data-i18n=\\\"nav.open_source\\\"></a></li></ul></div><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.support\\\"></strong></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a tabindex=\\\"-1\\\" data-i18n=\\\"nav.contact\\\" class=\\\"contact-modal\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"https://www.facebook.com/codecombat\\\" data-i18n=\\\"nav.facebook\\\"></a></li><li><a href=\\\"https://twitter.com/codecombat\\\" data-i18n=\\\"nav.twitter\\\"></a></li></ul></div></div></div></div><div id=\\\"final-footer\\\" class=\\\"small text-center\\\">Copyright Â©2016 CodeCombat. All Rights Reserved.<br class=\\\"hidden-lg hidden-md\\\"/><img src=\\\"/images/pages/base/logo.png\\\" alt=\\\"CodeCombat\\\"/><br class=\\\"hidden-lg hidden-md\\\"/>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<span data-i18n=\\\"nav.help_pref\\\" class=\\\"spr\\\"></span>\");\nvar supportEmail = (me.get('preferredLanguage', true) || 'en-US').split('-')[0] == 'nl' ? 'klantenservice@codecombat.nl' : 'team@codecombat.com';\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"mailto:\" + supportEmail) }, {\"href\":true})) + \">\" + (jade.escape(null == (jade.interp = supportEmail) ? \"\" : jade.interp)) + \"</a><span data-i18n=\\\"nav.help_suff\\\" class=\\\"spl\\\"></span>\");\n}\nbuf.push(\"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","RootView = require 'views/core/RootView'\nCocoView = require 'views/core/CocoView'\ntemplate = require 'templates/artisans/tag-test-view'\ntagger = require 'lib/SolutionConceptTagger'\nconceptList =require 'schemas/concepts'\n\nThangType = require 'models/ThangType'\n\nThangTypes = require 'collections/ThangTypes'\nace = require 'ace'\n\nclass ActualTagView extends CocoView\n  template: require 'templates/artisans/tag-test-tags-view'\n  id: 'tag-test-tags-view'\n\nmodule.exports = class ThangTasksView extends RootView\n  template: template\n  id: 'tag-test-view'\n  events:\n    'input input': 'processThangs'\n    'change input': 'processThangs'\n  \n  initialize: () ->\n    @tags = []\n    console.log \"Hello\"\n    @debouncedUpdateTags = _.debounce @updateTags, 1000\n  \n  afterRender: () ->\n    @insertSubView @tagView = new ActualTagView()\n    ta = @$el.find('#tag-test-editor')\n    @editor = ace.edit ta[0]\n    @editor.resize()\n    @editor.getSession().setMode(\"ace/mode/javascript\")\n    @editor.getSession().on 'change', () =>\n      @tagView.tags = []\n      @tagView.error = undefined\n      @tagView.render()\n      @debouncedUpdateTags()\n\n    @editor.setValue(localStorage.code||'')\n    @editor.focus()\n    @updateTags()\n\n  updateTags: () =>\n    code = @editor.getValue()\n    @tagView.tags = []\n    @tagView.error = undefined\n    localStorage.code = code\n    try\n      @tagView.tags = _.map tagger(source: code), (t) -> _.find(conceptList, (e) => e.concept is t)?.name\n    catch e\n      @tagView.error = e.stack\n    \n    @tagView.render()\n    console.log \"Update tags\"\n"]}